<%= render 'public/header' %>

<% flash.each do |key, value| %>
  <% if key == "success" %>
    <div class="alert alert-success"><%= value %></div>
  <% elsif key == "error" %>
    <div class="alert alert-danger"><%= value %></div>
  <% end %>
<% end %>

<section class="page-container">
    <h2 class="page-title"><%= @recipe.name %></h2>

    <section class="recipe-detail">
      <header class="recipe-header">
        <div>
          <span>Created By: üë®‚Äçüç≥</span>
          <span><%= @recipe.user.name %></span>
        </div>
        <div class="recipe-time">
          <span>Preparation: ‚è±</span>
          <span><%= @recipe.preparation_time %> minutes</span>
        </div>
        <div class="recipe-time">
          <span>Cooking: ‚è∞</span>
          <span><%= @recipe.cooking_time %> minutes</span>
        </div>
        <div>
          <span>Public:</span>
          <div class="toggle-container <%= @recipe.public ? "on" : "off" %>">
            <%= form_with model: @recipe do |form| %>
              <%= form.check_box :public, checked: !@recipe.public, hidden: true %>
              <%= form.submit "" %>
            <% end %>
          </div>
        </div>
      </header>

      <div class="recipe-detail">
        <h3>Description:</h3>
        <p><%= @recipe.description %></p>
      </div>

      <div class="recipe-actions">
      <%= link_to "Add Ingredient", new_food_path, class: "recipe-action-btn " %>
      <%= link_to "Generate Shopping List", root_path, class: "recipe-action-btn " %>
      <% if current_user == @recipe.user %>
          <%= form_with model: @recipe, method: :delete do |f| %>
              <%= f.submit "Delete Recipe", class: "recipe-action-btn del-btn" %>
          <% end %>
      <% end %>
    </div>
    </section>

    <div>
      <h3>Foods:</h3>
      <% if @recipe.foods.any? %>
        <ul>
          <% @recipe.foods.each do |food| %>
            <li><%= food.name %></li>
          <% end %>
        </ul>
      <% else %>
        <p>No foods added yet.</p>
      <% end %>
    </div>
</section>


